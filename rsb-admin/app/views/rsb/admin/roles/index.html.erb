<div class="flex justify-between items-center mb-6">
  <h1 class="text-2xl font-bold"><%= rsb_admin_t("roles.title") %></h1>
  <% if rsb_admin_can?("roles", "new") %>
    <a href="<%= rsb_admin.new_role_path %>"
       class="inline-flex items-center gap-1 px-4 py-2 bg-rsb-primary text-rsb-primary-text rounded-rsb text-sm font-medium hover:bg-rsb-primary-hover transition-colors">
      <%= rsb_admin_icon("plus", size: 16) %>
      <%= rsb_admin_t("shared.new", resource: rsb_admin_t("roles.title").singularize) %>
    </a>
  <% else %>
    <span class="inline-flex items-center gap-1 px-4 py-2 bg-rsb-primary/50 text-rsb-primary-text/50 rounded-rsb text-sm font-medium pointer-events-none cursor-not-allowed"
          title="<%= rsb_admin_t("shared.no_access") %>">
      <%= rsb_admin_icon("plus", size: 16) %>
      <%= rsb_admin_t("shared.new", resource: rsb_admin_t("roles.title").singularize) %>
    </span>
  <% end %>
</div>

<div class="bg-rsb-card border border-rsb-border rounded-rsb-lg shadow-rsb-sm overflow-hidden">
  <div class="overflow-x-auto">
    <table class="w-full">
      <thead>
        <tr>
          <th class="px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider text-rsb-muted bg-rsb-bg border-b border-rsb-border"><%= rsb_admin_t("columns.name") %></th>
          <th class="px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider text-rsb-muted bg-rsb-bg border-b border-rsb-border"><%= rsb_admin_t("roles.built_in") %></th>
          <th class="px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider text-rsb-muted bg-rsb-bg border-b border-rsb-border"><%= rsb_admin_t("roles.admin_users_count") %></th>
          <th class="px-4 py-3 text-right text-xs font-semibold uppercase tracking-wider text-rsb-muted bg-rsb-bg border-b border-rsb-border"><%= rsb_admin_t("roles.actions") %></th>
        </tr>
      </thead>
      <tbody>
        <% @roles.each do |role| %>
          <tr class="hover:bg-rsb-bg border-b border-rsb-border last:border-b-0">
            <td class="px-4 py-3 text-sm">
              <a href="<%= rsb_admin.role_path(role) %>" class="text-rsb-primary hover:underline"><%= role.name %></a>
            </td>
            <td class="px-4 py-3 text-sm">
              <% if role.built_in? %>
                <%= rsb_admin_badge(rsb_admin_t("roles.built_in"), variant: :warning) %>
              <% end %>
            </td>
            <td class="px-4 py-3 text-sm"><%= role.admin_users.count %></td>
            <td class="px-4 py-3 text-sm text-right">
              <div class="flex items-center gap-2 justify-end">
                <% if rsb_admin_can?("roles", "edit") %>
                  <a href="<%= rsb_admin.edit_role_path(role) %>"
                     class="text-rsb-muted hover:text-rsb-text" title="<%= rsb_admin_t("shared.edit") %>">
                    <%= rsb_admin_icon("edit", size: 16) %>
                  </a>
                <% else %>
                  <span class="text-rsb-muted/40 cursor-not-allowed" title="<%= rsb_admin_t("shared.no_access") %>">
                    <%= rsb_admin_icon("edit", size: 16) %>
                  </span>
                <% end %>
                <% if rsb_admin_can?("roles", "destroy") %>
                  <%= button_to rsb_admin.role_path(role), method: :delete,
                      data: { turbo_confirm: rsb_admin_t("roles.confirm_delete") },
                      class: "text-rsb-muted hover:text-rsb-danger" do %>
                    <%= rsb_admin_icon("trash", size: 16) %>
                  <% end %>
                <% else %>
                  <span class="text-rsb-muted/40 cursor-not-allowed" title="<%= rsb_admin_t("shared.no_access") %>">
                    <%= rsb_admin_icon("trash", size: 16) %>
                  </span>
                <% end %>
              </div>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>
