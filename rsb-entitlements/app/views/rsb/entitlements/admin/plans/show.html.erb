<div class="flex justify-between items-center mb-6">
  <h1 class="text-2xl font-bold"><%= @plan.name %></h1>
  <div class="flex gap-2">
    <a href="/admin/plans/<%= @plan.id %>/edit"
       class="inline-flex items-center gap-1 px-4 py-2 bg-rsb-primary text-rsb-primary-text rounded-rsb text-sm font-medium hover:bg-rsb-primary-hover transition-colors">Edit</a>
    <a href="/admin/plans"
       class="inline-flex items-center gap-1 px-4 py-2 border border-rsb-border rounded-rsb text-sm hover:bg-rsb-bg transition-colors">Back</a>
  </div>
</div>

<%# Plan Details %>
<div class="bg-rsb-card border border-rsb-border rounded-rsb-lg shadow-rsb-sm p-6 mb-4">
  <h3 class="text-base font-semibold mb-4">Plan Information</h3>
  <div class="grid grid-cols-[200px_1fr] gap-4">
    <strong class="text-sm text-rsb-muted">Name</strong>
    <div><%= @plan.name %></div>

    <strong class="text-sm text-rsb-muted">Slug</strong>
    <div><code class="px-1.5 py-0.5 bg-rsb-bg rounded-rsb-sm text-sm"><%= @plan.slug %></code></div>

    <strong class="text-sm text-rsb-muted">Interval</strong>
    <div>
      <span class="inline-block px-2.5 py-0.5 rounded-rsb bg-rsb-info-bg text-rsb-info-text text-xs font-medium"><%= @plan.interval.titleize %></span>
    </div>

    <strong class="text-sm text-rsb-muted">Price</strong>
    <div>$<%= "%.2f" % (@plan.price_cents / 100.0) %> <%= @plan.currency.upcase %></div>

    <strong class="text-sm text-rsb-muted">Status</strong>
    <div>
      <% if @plan.active? %>
        <span class="inline-block px-2.5 py-0.5 rounded-rsb bg-rsb-success-bg text-rsb-success-text text-xs font-medium">Active</span>
      <% else %>
        <span class="inline-block px-2.5 py-0.5 rounded-rsb bg-rsb-danger-bg text-rsb-danger-text text-xs font-medium">Inactive</span>
      <% end %>
    </div>
  </div>
</div>

<%# Features %>
<div class="bg-rsb-card border border-rsb-border rounded-rsb-lg shadow-rsb-sm p-6 mb-4">
  <h3 class="text-base font-semibold mb-4">Features</h3>
  <% if @plan.features.any? %>
    <div class="grid grid-cols-[repeat(auto-fill,minmax(200px,1fr))] gap-3">
      <% @plan.features.each do |key, value| %>
        <div class="flex items-center gap-2">
          <span class="text-sm"><%= key.titleize %></span>
          <% if value %>
            <span class="inline-block px-2.5 py-0.5 rounded-rsb bg-rsb-success-bg text-rsb-success-text text-xs font-medium">Enabled</span>
          <% else %>
            <span class="inline-block px-2.5 py-0.5 rounded-rsb bg-rsb-danger-bg text-rsb-danger-text text-xs font-medium">Disabled</span>
          <% end %>
        </div>
      <% end %>
    </div>
  <% else %>
    <p class="text-rsb-muted text-sm">No features configured.</p>
  <% end %>
</div>

<%# Limits %>
<div class="bg-rsb-card border border-rsb-border rounded-rsb-lg shadow-rsb-sm p-6 mb-4">
  <h3 class="text-base font-semibold mb-4">Limits</h3>
  <% if @plan.limits.any? %>
    <div class="grid grid-cols-[repeat(auto-fill,minmax(200px,1fr))] gap-3">
      <% @plan.limits.each do |key, value| %>
        <div>
          <div class="text-sm text-rsb-muted"><%= key.titleize %></div>
          <div class="text-xl font-semibold"><%= number_with_delimiter(value) %></div>
        </div>
      <% end %>
    </div>
  <% else %>
    <p class="text-rsb-muted text-sm">No limits configured.</p>
  <% end %>
</div>

<%# Metadata %>
<% if @plan.metadata.present? && @plan.metadata.any? %>
  <div class="bg-rsb-card border border-rsb-border rounded-rsb-lg shadow-rsb-sm p-6 mb-4">
    <h3 class="text-base font-semibold mb-4">Metadata</h3>
    <pre class="p-4 bg-rsb-bg rounded-rsb text-sm overflow-x-auto"><%= JSON.pretty_generate(@plan.metadata) %></pre>
  </div>
<% end %>

<%# Danger Zone %>
<div class="bg-rsb-card border border-rsb-border rounded-rsb-lg shadow-rsb-sm p-6">
  <h3 class="text-base font-semibold text-rsb-danger mb-4">Danger Zone</h3>
  <%= button_to "Delete Plan",
        "/admin/plans/#{@plan.id}",
        method: :delete,
        data: { turbo_confirm: "Are you sure you want to delete this plan? This action cannot be undone." },
        class: "px-4 py-2 bg-rsb-danger text-white rounded-rsb text-sm font-medium hover:opacity-90 transition-colors" %>
</div>
